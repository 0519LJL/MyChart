@{
    ViewBag.Title = "DoctorLine";
}

<h2>DoctorLine</h2>
<head>
    <script src="~/Scripts/Chart.bundle.min.js"></script>
    <script src="~/Scripts/utils.js"></script>
    <script src="~/Scripts/jquery-1.8.2.min.js"></script>
    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
    </style>
</head>

<body>
    <div style="width:100%;">
        <canvas id="canvas"></canvas>
    </div>
    <div>
        <button id="btn" onclick="sayHello();">sayHello</button>
        <button id="btn2">sayHello2</button>
        <input  id="input1" value="234"/>
    </div>
    <script>
        var config = {
            type: 'line',
            data: {
                labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'Aguest', 'September'],
                datasets: [
                    {
                        label: 'My First dataset',
                        borderColor: window.chartColors.red,
                        fill: false,
                        // Skip a point in the middle
                        data: [
                            10,
                            12,
                            9,
                            6,
                            13,
                            5,
                            10
                        ],

                    }, {
                        label: 'My Second dataset',
                        borderColor: window.chartColors.blue,
                        fill: false,
                        // Skip first and last points
                        data: [
                            7,
                            8,
                            9,
                            11,
                            10,
                            12,
                            13
                        ],
                    }
                ]
            },
            options: {
                responsive: true,
                title: {
                    display: true,
                    text: 'Chart.js Line Chart - Skip Points'
                },
                tooltips: {
                    mode: 'index',
                },
                hover: {
                    mode: 'index'
                },
                scales: {
                    //xAxes: [{
                    //    display: true,
                    //    scaleLabel: {
                    //        display: true,
                    //        labelString: 'Month'
                    //    }
                    //}],
                    //yAxes: [{
                    //    display: true,
                    //    scaleLabel: {
                    //        display: true,
                    //        labelString: 'Value'
                    //    },
                    //}]

                }
            }
        };

        window.onload = function() {
            //var ctx = document.getElementById('canvas').getContext('2d');
            //window.myLine = new Chart(ctx, config);
        };

        $("#btn2").click(function() {
            $.ajax({
                url: "Doctor/sayHello",
                type: 'POST',
                success: function (data) {
                    if (data != null) {
                        createData(data.Labels, data.datas);
                    }
                }
            });
        });

        function createData(labels,datas) {
            var chart = {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: getdata(datas)
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: 'Chart.js Line Chart - Skip Points'
                    },
                    tooltips: {
                        mode: 'index',
                    },
                    hover: {
                        mode: 'index'
                    },
                    scales: {
                        //xAxes: [{
                        //    display: true,
                        //    scaleLabel: {
                        //        display: true,
                        //        labelString: 'Month'
                        //    }
                        //}],
                        //yAxes: [{
                        //    display: true,
                        //    scaleLabel: {
                        //        display: true,
                        //        labelString: 'Value'
                        //    },
                        //}]

                    }
                }
            };

            var ctx = document.getElementById('canvas').getContext('2d');
            window.myLine = new Chart(ctx, chart);
        }

        function getdata(datas) {
            var data = [];
            for (var i = 0; i < datas.length; i++) {
                var site2 = {
                    "label":   datas[i].Label,
                    "borderColor": bg1(),
                    "fill": false,
                    "data": datas[i].Values};
                data[i] = site2;
            }

            return data;
        }

        var getRandomColor = function () {
            return (function (m, s, c) {
                return (c ? arguments.callee(m, s, c - 1) : '#') +
                  s[m.floor(m.random() * 16)]
            })(Math, '0123456789abcdef', 5)
        }

        function bg1() {
            var r = Math.floor(Math.random() * 256);
            var g = Math.floor(Math.random() * 256);
            var b = Math.floor(Math.random() * 256);
            return "rgb(" + r + ',' + g + ',' + b + ")";
        }

       
    </script>
</body>

